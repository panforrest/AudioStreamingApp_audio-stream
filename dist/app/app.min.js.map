{"version":3,"sources":["app.js"],"names":["console","log","currentUser","uploading","uploadFile","turbo","err","data","alert","message","JSON","stringify","file","result","tracks","push","update","tracksList","forEach","track","i","url","name","timestamp","$","html","image","attr","Turbo","site_id","user","click","event","preventDefault","on","visitor","val","email","password","length","createUser","window","location","href"],"mappings":"CAEA,WAEEA,QAAQC,IAAI,sBACZ,IAAIC,EAAc,KACdC,EAAY,KAEZC,EAAa,WAEhBC,EAAMD,WAAW,SAASE,EAAKC,GAC7B,GAAID,EACHE,MAAM,UAAYF,EAAIG,cAOvB,GAHAT,QAAQC,IAAI,oBAAsBS,KAAKC,UAAUJ,IAGhC,QAAbJ,GAkBJ,GAAiB,SAAbA,EAAqB,CACrB,IAAIS,EAAOL,EAAKM,OAGdC,EAASZ,EAAYY,WAuBzB,OAtBAA,EAAOC,KAAKH,QAEZP,EAAMW,OAAO,OAAQd,GAAcY,OAAQA,GAAS,SAASR,EAAKC,GACjE,GAAGD,EACDE,MAAM,UAAYF,EAAIG,aADxB,CAKAT,QAAQC,IAAI,iBAAmBS,KAAKC,UAAUJ,IAGhD,IAAIU,EAAa,IAFff,EAAcK,EAAKM,QAGTC,OAAOI,QAAQ,SAASC,EAAOC,GACzCH,GAAc,wDAA0DE,EAAME,IAAM,iEACpFJ,GAAc,oCAAsCE,EAAME,IAAM,KAAOF,EAAMG,KAAO,yBAA2BH,EAAMI,UAAY,YACjIN,GAAc,+CAGbO,EAAE,iBAAiBC,KAAKR,WAzC5B,CAEC,IAAIS,EAAQnB,EAAKM,OAAOQ,IAEvBhB,EAAMW,OAAO,OAAQd,GAAcwB,MAAOA,GAAQ,SAASpB,EAAKC,GAC5DD,EACDE,MAAM,UAAYF,EAAIG,UAIxBT,QAAQC,IAAI,iBAAmBS,KAAKC,UAAUJ,IAC9CL,EAAcK,EAAKM,OACfW,EAAE,iBAAiBG,KAAK,MAAOzB,EAAYwB,cA0CjDrB,EAAQuB,OAAOC,QAAS,6BAC5BxB,EAAMH,YAAY,SAASI,EAAKC,GAC/B,GAAID,EACFN,QAAQC,IAAI,wBADd,CAKCD,QAAQC,IAAI,iBAAmBS,KAAKC,UAAUJ,IAC9CL,EAAcK,EAAKuB,KACnBN,EAAE,oBAAoBC,KAAKlB,EAAKuB,KAAKR,MAErC,IAAIL,EAAa,GACjBf,EAAYY,OAAOI,QAAQ,SAASC,EAAOC,GACzCH,GAAc,wDAA0DE,EAAME,IAAM,iEACpFJ,GAAc,oCAAsCE,EAAME,IAAM,KAAOF,EAAMG,KAAO,yBAA2BH,EAAMI,UAAY,YACjIN,GAAc,+CAIhBjB,QAAQC,IAAI,gBAAkBgB,GAE9BO,EAAE,iBAAiBC,KAAKR,GACxBO,EAAE,iBAAiBG,KAAK,MAAOzB,EAAYwB,UAI7CF,EAAE,eAAeO,MAAM,SAASC,GAC/BA,EAAMC,iBAEW,MAAf/B,IAGFF,QAAQC,IAAI,gBACZE,EAAY,QACZC,OAIDoB,EAAE,gBAAgBU,GAAG,QAAS,SAASF,GACtCA,EAAMC,iBAEL,IAAIE,GACHb,KAAME,EAAE,eAAeY,MACvBC,MAAOb,EAAE,gBAAgBY,MACxBE,SAAUd,EAAE,mBAAmBY,OAGN,GAAvBD,EAAQb,KAAKiB,OAKW,GAAxBJ,EAAQE,MAAME,OAKa,GAA3BJ,EAAQG,SAASC,OAKtBlC,EAAMmC,WAAWL,EAAS,SAAS7B,EAAKC,GAClCD,EACHE,MAAM,UAAYF,EAAIG,UAItBT,QAAQC,IAAI,aAAaS,KAAKC,UAAUJ,IACxCkC,OAAOC,SAASC,KAAO,YAXxBnC,MAAM,8BALNA,MAAM,2BALNA,MAAM,4BAyBTgB,EAAE,iBAAiBO,MAAM,SAASC,GACjCA,EAAMC,iBAGW,MAAf/B,IAGFF,QAAQC,IAAI,gBACZE,EAAY,OACZC,OAzJH","file":"app.min.js","sourcesContent":["// your custom app logic goes here:\n\n(function(){\n\n  console.log('Hello Audio Stream')\n  var currentUser = null\n  var uploading = null\n\n  var uploadFile = function(){\n\n  \tturbo.uploadFile(function(err, data){\n  \t  if (err){\n  \t  \talert('Error: ' + err.message)\n  \t  \treturn\n  \t  }\n\n  \t  console.log('Upload Complete: ' + JSON.stringify(data))\n      //Upload Complete: {\"confirmation\":\"success\",\"result\":{\"site\":\"59bc88062b047800127690e1\",\"name\":\"themepunch-script-1.mp3\",\"type\":\"audio/mp3\",\"url\":\"https://storage.turbo360.co/audio-stream--6xiqee/themepunch-script-1.mp3\",\"size\":184864,\"timestamp\":\"2017-09-16T17:13:34.647Z\",\"schema\":\"blob\",\"id\":\"59bd5bbe2b047800127690f8\"}}\n\n  \t  if (uploading == 'icon'){\n  \t  \t// console.log('ICON: ' + JSON.stringify(data))\n  \t  \tvar image = data.result.url\n\n  \t    turbo.update('user', currentUser, {image: image}, function(err, data){\n\t      \tif(err){\n\t      \t  alert('Error: ' + err.message)\n\t      \t  return\n\t      \t}\n\n\t      \tconsole.log('USER UPDATED: ' + JSON.stringify(data))\n\t      \tcurrentUser = data.result\n            $('#profile-icon').attr('src', currentUser.image)\n\t    })\n\n  \t  \treturn\n  \t  }\n\n  \t  if (uploading == 'track'){\n  \t      var file = data.result\n      \n\t      //UPDATE CURRENT USER\n\t      var tracks = currentUser.tracks || []\n\t      tracks.push(file)\n\n\t      turbo.update('user', currentUser, {tracks: tracks}, function(err, data){\n\t      \tif(err){\n\t      \t  alert('Error: ' + err.message)\n\t      \t  return\n\t      \t}\n\n\t      \tconsole.log('USER UPDATED: ' + JSON.stringify(data))\n\t      \tcurrentUser = data.result\n\n\t\t    var tracksList = ''\n\t\t    currentUser.tracks.forEach(function(track, i){\n\t\t      tracksList += '<tr><td style=\"width:130px\"><a target=\"_blank\" href=\"' + track.url + '\" ><img src=\"/dist/images/icon_play.png\" alt=\"...\" /></a></td>'\n\t\t      tracksList += '<td><h5><a target=\"_blank\" href=\"' + track.url + '\">' + track.name + '</a></h5><p>Uploaded: ' + track.timestamp + '</p></td>'\n\t\t      tracksList += '<td><h4 class=\"price\">Share</h4></td></tr>'\n\n\t\t    })       \t\n\t        $('#tracks-table').html(tracksList)\n\n\t      })\n\n\t      return\n  \t  }\n\n  \t})\n  // })\n\n\n  }\n\n  var turbo = Turbo({site_id: '59bc88062b047800127690e1'})\n  turbo.currentUser(function(err, data){\n  \tif (err){\n  \t  console.log('No One Logged In')\n  \t  return\n  \t}\n\n    console.log('Current User: ' + JSON.stringify(data))\n    currentUser = data.user\n    $('#header-username').html(data.user.name)\n\n    var tracksList = ''\n    currentUser.tracks.forEach(function(track, i){\n      tracksList += '<tr><td style=\"width:130px\"><a target=\"_blank\" href=\"' + track.url + '\" ><img src=\"/dist/images/icon_play.png\" alt=\"...\" /></a></td>'\n      tracksList += '<td><h5><a target=\"_blank\" href=\"' + track.url + '\">' + track.name + '</a></h5><p>Uploaded: ' + track.timestamp + '</p></td>'\n      tracksList += '<td><h4 class=\"price\">Share</h4></td></tr>'\n\n    })\n\n    console.log('Tracks List: ' + tracksList)\n\n    $('#tracks-table').html(tracksList)\n    $('#profile-icon').attr('src', currentUser.image)\n\n  })\n\n  $('#btn-upload').click(function(event){\n  \tevent.preventDefault()\n\n\tif (currentUser == null)\n\t  return\n\n  \tconsole.log('Upload Track')\n  \tuploading = 'track'\n  \tuploadFile()\n\n  })\n\n  $('#button-join').on('click', function(event){ //SHORTCUT $('#button-join').click(function(event){\n  \tevent.preventDefault()\n\n    var visitor = {\n  \t  name: $('#input-name').val(),\n  \t  email: $('#input-email').val(),\n      password: $('#input-password').val()\n  \t}\n\n    if (visitor.name.length == 0){\n    \talert('Please enter your name')\n    \treturn\n    }\n\n    if (visitor.email.length == 0){\n    \talert('Please enter your email')\n    \treturn\n    }\n\n    if (visitor.password.length == 0){\n    \talert('Please enter your password')\n    \treturn\n    }\n  \t\n  \tturbo.createUser(visitor, function(err, data){\n  \t  if (err){\n  \t  \talert('Error: ' + err.message)\n  \t  \treturn\n  \t  }\n\n      console.log('Register: '+JSON.stringify(data))\n      window.location.href = '/admin'\n  \t})\n  })\n\n  $('#profile-icon').click(function(event){\n  \tevent.preventDefault()\n  \t// console.log('Upload Icon')\n\n\tif (currentUser == null)\n\t  return\n\n  \tconsole.log('Upload Track')\n  \tuploading = 'icon'\n  \tuploadFile()\n\n  })\n\n})()"]}