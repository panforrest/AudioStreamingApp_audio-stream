{"version":3,"sources":["app.js"],"names":["console","log","currentUser","turbo","Turbo","site_id","err","data","JSON","stringify","user","$","html","name","tracksList","tracks","forEach","track","i","url","timestamp","click","event","preventDefault","uploadFile","alert","message","file","result","push","update","on","visitor","val","email","password","length","createUser","window","location","href"],"mappings":"CAEA,WAEEA,QAAQC,IAAI,sBACZ,IAAIC,EAAc,KAEdC,EAAQC,OAAOC,QAAS,6BAC5BF,EAAMD,YAAY,SAASI,EAAKC,GAC/B,GAAID,EACFN,QAAQC,IAAI,wBADd,CAKCD,QAAQC,IAAI,iBAAmBO,KAAKC,UAAUF,IAC9CL,EAAcK,EAAKG,KACnBC,EAAE,oBAAoBC,KAAKL,EAAKG,KAAKG,MAErC,IAAIC,EAAa,GACjBZ,EAAYa,OAAOC,QAAQ,SAASC,EAAOC,GACzCJ,GAAc,wDAA0DG,EAAME,IAAM,iEACpFL,GAAc,oCAAsCG,EAAME,IAAM,KAAOF,EAAMJ,KAAO,yBAA2BI,EAAMG,UAAY,YACjIN,GAAc,+CAIhBd,QAAQC,IAAI,gBAAkBa,GAE9BH,EAAE,iBAAiBC,KAAKE,MAI1BH,EAAE,eAAeU,MAAM,SAASC,GAC/BA,EAAMC,iBACNvB,QAAQC,IAAI,gBAEZE,EAAMqB,WAAW,SAASlB,EAAKC,GAC7B,GAAID,EACHmB,MAAM,UAAYnB,EAAIoB,aADvB,CAKA1B,QAAQC,IAAI,oBAAsBO,KAAKC,UAAUF,IAGjD,IAAIoB,EAAOpB,EAAKqB,OAEhB,GAAmB,MAAf1B,EAAJ,CAIC,IAAIa,EAASb,EAAYa,WACzBA,EAAOc,KAAKF,GAEZxB,EAAM2B,OAAO,OAAQ5B,GAAca,OAAQA,GAAS,SAAST,EAAKC,GACjE,GAAGD,EACDmB,MAAM,UAAYnB,EAAIoB,aADxB,CAKA1B,QAAQC,IAAI,iBAAmBO,KAAKC,UAAUF,IAGhD,IAAIO,EAAa,IAFfZ,EAAcK,EAAKqB,QAGTb,OAAOC,QAAQ,SAASC,EAAOC,GACzCJ,GAAc,wDAA0DG,EAAME,IAAM,iEACpFL,GAAc,oCAAsCG,EAAME,IAAM,KAAOF,EAAMJ,KAAO,yBAA2BI,EAAMG,UAAY,YACjIN,GAAc,+CAGbH,EAAE,iBAAiBC,KAAKE,YAQ9BH,EAAE,gBAAgBoB,GAAG,QAAS,SAAST,GACtCA,EAAMC,iBAEL,IAAIS,GACHnB,KAAMF,EAAE,eAAesB,MACvBC,MAAOvB,EAAE,gBAAgBsB,MACxBE,SAAUxB,EAAE,mBAAmBsB,OAGN,GAAvBD,EAAQnB,KAAKuB,OAKW,GAAxBJ,EAAQE,MAAME,OAKa,GAA3BJ,EAAQG,SAASC,OAKtBjC,EAAMkC,WAAWL,EAAS,SAAS1B,EAAKC,GAClCD,EACHmB,MAAM,UAAYnB,EAAIoB,UAItB1B,QAAQC,IAAI,aAAaO,KAAKC,UAAUF,IACxC+B,OAAOC,SAASC,KAAO,YAXxBf,MAAM,8BALNA,MAAM,2BALNA,MAAM,4BAtFX","file":"app.min.js","sourcesContent":["// your custom app logic goes here:\n\n(function(){\n\n  console.log('Hello Audio Stream')\n  var currentUser = null\n\n  var turbo = Turbo({site_id: '59bc88062b047800127690e1'})\n  turbo.currentUser(function(err, data){\n  \tif (err){\n  \t  console.log('No One Logged In')\n  \t  return\n  \t}\n\n    console.log('Current User: ' + JSON.stringify(data))\n    currentUser = data.user\n    $('#header-username').html(data.user.name)\n\n    var tracksList = ''\n    currentUser.tracks.forEach(function(track, i){\n      tracksList += '<tr><td style=\"width:130px\"><a target=\"_blank\" href=\"' + track.url + '\" ><img src=\"/dist/images/icon_play.png\" alt=\"...\" /></a></td>'\n      tracksList += '<td><h5><a target=\"_blank\" href=\"' + track.url + '\">' + track.name + '</a></h5><p>Uploaded: ' + track.timestamp + '</p></td>'\n      tracksList += '<td><h4 class=\"price\">Share</h4></td></tr>'\n\n    })\n\n    console.log('Tracks List: ' + tracksList)\n\n    $('#tracks-table').html(tracksList)\n\n  })\n\n  $('#btn-upload').click(function(event){\n  \tevent.preventDefault()\n  \tconsole.log('Upload Track')\n\n  \tturbo.uploadFile(function(err, data){\n  \t  if (err){\n  \t  \talert('Error: ' + err.message)\n  \t  \treturn\n  \t  }\n\n  \t  console.log('Upload Complete: ' + JSON.stringify(data))\n      //Upload Complete: {\"confirmation\":\"success\",\"result\":{\"site\":\"59bc88062b047800127690e1\",\"name\":\"themepunch-script-1.mp3\",\"type\":\"audio/mp3\",\"url\":\"https://storage.turbo360.co/audio-stream--6xiqee/themepunch-script-1.mp3\",\"size\":184864,\"timestamp\":\"2017-09-16T17:13:34.647Z\",\"schema\":\"blob\",\"id\":\"59bd5bbe2b047800127690f8\"}}\n\n  \t  var file = data.result\n\n  \t  if (currentUser == null)\n  \t  \treturn\n      \n      //UPDATE CURRENT USER\n      var tracks = currentUser.tracks || []\n      tracks.push(file)\n\n      turbo.update('user', currentUser, {tracks: tracks}, function(err, data){\n      \tif(err){\n      \t  alert('Error: ' + err.message)\n      \t  return\n      \t}\n\n      \tconsole.log('USER UPDATED: ' + JSON.stringify(data))\n      \tcurrentUser = data.result\n\n\t    var tracksList = ''\n\t    currentUser.tracks.forEach(function(track, i){\n\t      tracksList += '<tr><td style=\"width:130px\"><a target=\"_blank\" href=\"' + track.url + '\" ><img src=\"/dist/images/icon_play.png\" alt=\"...\" /></a></td>'\n\t      tracksList += '<td><h5><a target=\"_blank\" href=\"' + track.url + '\">' + track.name + '</a></h5><p>Uploaded: ' + track.timestamp + '</p></td>'\n\t      tracksList += '<td><h4 class=\"price\">Share</h4></td></tr>'\n\n\t    })       \t\n        $('#tracks-table').html(tracksList)\n\n      })\n\n  \t  \n  \t})\n  })\n\n  $('#button-join').on('click', function(event){ //SHORTCUT $('#button-join').click(function(event){\n  \tevent.preventDefault()\n\n    var visitor = {\n  \t  name: $('#input-name').val(),\n  \t  email: $('#input-email').val(),\n      password: $('#input-password').val()\n  \t}\n\n    if (visitor.name.length == 0){\n    \talert('Please enter your name')\n    \treturn\n    }\n\n    if (visitor.email.length == 0){\n    \talert('Please enter your email')\n    \treturn\n    }\n\n    if (visitor.password.length == 0){\n    \talert('Please enter your password')\n    \treturn\n    }\n  \t\n  \tturbo.createUser(visitor, function(err, data){\n  \t  if (err){\n  \t  \talert('Error: ' + err.message)\n  \t  \treturn\n  \t  }\n\n      console.log('Register: '+JSON.stringify(data))\n      window.location.href = '/admin'\n  \t})\n\n  })\n\n})()"]}